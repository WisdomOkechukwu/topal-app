(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{521:function(t,e,n){"use strict";n.r(e);n(35),n(22),n(44),n(29),n(45);var r=n(17),o=n(3);n(33),n(10),n(19),n(20),n(373),n(63),n(28),n(38),n(18),n(50),n(487),n(62),n(483);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={name:"WithdrawWalletModal",components:{SharedModal:function(){return Promise.resolve().then(n.bind(null,485))},Select:function(){return n.e(1).then(n.bind(null,545))}},props:{isOpen:{type:Boolean,default:!1}},data:function(){return{amount:"10000",accountNumber:"",banks:[],bankAccount:{bank_name:null,account_number:null,bank_code:null}}},mounted:function(){},beforeMount:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBankList();case 2:case"end":return e.stop()}}),e)})))()},methods:{bankSelected:function(t){var e=this.banks.find((function(b){return b.value===t}));e&&(this.bankAccount.bank_name=e.label,this.bankAccount.bank_code=t)},getBankList:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/utility/banks");case 3:n=e.sent,data=n.data.data,t.banks=data.filter((function(t){return t.active&&!t.is_deleted})).map((function(t){return{label:t.name,value:t.code}})),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},withdrawFromWallet:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,l,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("/wallet/withdraw",{bank:t.bankAccount.bank_code?c(c({},t.bankAccount),{},{account_number:t.accountNumber.replaceAll("-","")}):void 0,amount:t.amount.replaceAll(",","")});case 3:t.$toast.alert({text:"Your withdrawal request is being processed.",type:"success",time:3,position:"top"}),t.$emit("close"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),[419,401,400,403].includes(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n?void 0:n.status)&&(o=null===e.t0||void 0===e.t0||null===(l=e.t0.response.data)||void 0===l?void 0:l.message),[422].includes(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.status)&&(o=Object.values(null===e.t0||void 0===e.t0||null===(m=e.t0.response.data)||void 0===m?void 0:m.errors)[0][0]),t.$toast.alert({text:o||"An error occured while trying to process your request",type:"error",time:3,position:"top"});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}},d=n(27),component=Object(d.a)(m,(function(){var t=this,e=t._self._c;return e("SharedModal",{attrs:{"is-open":t.isOpen}},[e("div",{staticClass:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"sm:flex sm:items-start w-full"},[e("div",{staticClass:"mt-3 sm:mt-0 sm:text-left w-full"},[e("h3",{staticClass:"text-lg leading-6 font-medium text-gray-900",attrs:{id:"modal-title"}},[t._v("\n          Withdraw from your wallet\n        ")]),t._v(" "),e("div",{staticClass:"mt-2"},[e("p",{staticClass:"text-sm font-light text-gray-500"},[t._v("\n            Insert below the amount you choose to withdraw from your wallet\n            with:\n          ")])]),t._v(" "),e("div",{staticClass:"mt-4"},[e("div",{staticClass:"mt-1 relative rounded-md shadow-sm"},[e("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{staticClass:"text-gray-500 sm:text-xl"},[t._v(" NGN ")])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"},{name:"cleave",rawName:"v-cleave",value:{numeral:!0,numeralThousandsGroupStyle:"thousand"},expression:"{\n                numeral: true,\n                numeralThousandsGroupStyle: 'thousand',\n              }"}],staticClass:"focus:ring-custom-primary focus:border-custom-primary block w-full pl-16 pr-12 sm:text-xl font-semibold border-gray-300 rounded-md placeholder:sm:text-xl",attrs:{id:"amount",type:"text",name:"amount",placeholder:"0.00"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}})]),t._v(" "),t.$auth.user.bank_account?t._e():[e("hr",{staticClass:"mt-4"}),t._v(" "),e("div",[e("Select",{attrs:{"wrapper-overide-class":"mt-4","label-overide-class":"block text-sm font-medium text-custom-primary","input-overide-class":"mt-1\n      block\n      w-full\n      py-2\n      px-3\n      border border-gray-300\n      bg-white\n      rounded-md\n      shadow-sm\n      focus:outline-none focus:ring-custom-primary focus:border-custom-primary\n      sm:text-xl",label:"Choose bank",entries:t.banks},on:{"value-changed":t.bankSelected}}),t._v(" "),e("div",{staticClass:"relative rounded-md shadow-sm mt-4"},[e("label",{class:["block text-sm font-medium text-custom-primary"],attrs:{for:"account"}},[t._v("Account Number")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.accountNumber,expression:"accountNumber"},{name:"cleave",rawName:"v-cleave",value:{delimiters:["-"],blocks:[3,3,4],uppercase:!0},expression:"{\n                    delimiters: ['-'],\n                    blocks: [3, 3, 4],\n                    uppercase: true,\n                  }"}],staticClass:"mt-1 focus:ring-custom-primary focus:border-custom-primary block w-full p-2 sm:text-2xl font-semibold border-gray-300 rounded-md placeholder:sm:text-2xl",attrs:{id:"accountNumber",type:"text",name:"accountNumber",placeholder:"XXX-XXX-XXXX"},domProps:{value:t.accountNumber},on:{input:function(e){e.target.composing||(t.accountNumber=e.target.value)}}})])],1)]],2)])])]),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-custom-primary text-base font-light text-white hover:bg-custom-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-custom-primary sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.withdrawFromWallet.apply(null,arguments)}}},[t._v("\n        Withdraw\n      ")]),t._v(" "),e("button",{staticClass:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-light text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-custom-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("\n        Cancel\n      ")])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SharedModal:n(485).default})}}]);