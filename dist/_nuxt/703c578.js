(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{486:function(t,e,n){"use strict";function o(a,b){return a.label<b.label?-1:a.label>b.label?1:0}n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return l}));var r={style:"currency",currency:"NGN"},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return new Intl.NumberFormat(e,n).format(t)}},535:function(t,e,n){"use strict";n.r(e);n(63),n(28),n(10),n(38);var o=n(15),r=n(3),l=(n(373),n(18),n(50),n(30),n(62),n(483),n(33),n(495)),c=n.n(l),m=(n(486),{name:"WithdrawalList",components:{},layout:"auth",middleware:"auth",asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.params,n=t.$axios,e.prev=1,e.next=4,n.get("utility/banks");case 4:return o=e.sent,e.next=7,n.get("customer/beneficiaries/list");case 7:return r=e.sent,console.log(r.data.recipients),e.abrupt("return",{banks:o.data.data,beneficaries:r.data.recipients});case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))()},data:function(){return{sendto:null,status:0,isFundWalletModalOpen:!1,isWithdrawWalletModalOpen:!1,balance:0,wamount:null,banks:[],beneficaries:[],intationResponse:null,otp:null,form:{amount:null,bankcode:null,accountnumber:null,note:null,accountname:null}}},head:function(){return{title:"Withdrawal | Tapol"}},computed:{bankselected:function(){var t=this;return this.banks.find((function(e){return e.code==t.form.bankcode})).name}},watch:{wamount:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=null===(e=n.wamount)||void 0===e?void 0:e.toString().replace("₦ ","").replace(",","").replace(",",""),n.form.amount=o;case 2:case"end":return t.stop()}}),t)})))()},sendto:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(Object(o.a)(t)),null!=t&&"new"!=t&&(console.log(t),n.form.bankcode=t.bankcode,n.form.accountnumber=t.accountnumber);case 2:case"end":return e.stop()}}),e)})))()}},created:function(){var t;this.balance=null===(t=this.$auth.user)||void 0===t||null===(t=t.wallet)||void 0===t?void 0:t.balance},beforeMount:function(){return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{validateForm:function(){console.log(this.form),null!=this.form.accountnumber&&""!=this.form.accountnumber?null!=this.form.amount&&""!=this.form.amount?null!=this.form.bankcode&&""!=this.form.bankcode?null!=this.form.note&&""!=this.form.note||this.$toast.alert({text:"Note is required",type:"error",time:3,position:"top"}):this.$toast.alert({text:"Bank is required",type:"error",time:3,position:"top"}):this.$toast.alert({text:"Amount is required",type:"error",time:3,position:"top"}):this.$toast.alert({text:"Account number is required",type:"error",time:3,position:"top"})},confirmTransfer:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.otp&&""!=t.otp){e.next=3;break}return t.$toast.alert({text:"OTP is required",type:"error",time:3,position:"top"}),e.abrupt("return");case 3:return n={customer_id:t.$auth.user.customer_id,reference_id:t.intationResponse.reference_id,otp:t.otp},e.next=6,t.$apiservice.confirmTransfer(n).then((function(e){t.intationResponse=e.data,console.log(t.intationResponse),c()("Success",t.intationResponse.message,"success").then((function(e){console.log(e),1==e&&t.$router.push("./"),t.$router.push("./")}))})).catch((function(e){var n,o,r,l,c;[419,401,400].includes(null==e||null===(n=e.response)||void 0===n?void 0:n.status)&&(r=null==e||null===(l=e.response.data)||void 0===l?void 0:l.message);[422].includes(null==e||null===(o=e.response)||void 0===o?void 0:o.status)&&(r=Object.values(null==e||null===(c=e.response.data)||void 0===c?void 0:c.errors)[0][0]);t.$toast.alert({text:r||"An error occured while trying to login",type:"error",time:3,position:"top"})}));case 6:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.validateForm(),console.log(t.form),n=t.form,e.next=5,t.$apiservice.initiateTransfer(n).then((function(e){t.intationResponse=e.data,console.log(t.intationResponse),t.status=1})).catch((function(e){var n,o,r,l,c;[419,401,400].includes(null==e||null===(n=e.response)||void 0===n?void 0:n.status)&&(r=null==e||null===(l=e.response.data)||void 0===l?void 0:l.message);[422].includes(null==e||null===(o=e.response)||void 0===o?void 0:o.status)&&(r=Object.values(null==e||null===(c=e.response.data)||void 0===c?void 0:c.errors)[0][0]);t.$toast.alert({text:r||"An error occured while trying to login",type:"error",time:3,position:"top"})}));case 5:case"end":return e.stop()}}),e)})))()}}}),d=n(27),component=Object(d.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"grid grid-cols-12 gap-2 mt-8"},[e("div",{staticClass:"md:col-span-8 col-span-12 text-custom-primary bg-white rounded-xl sm:shadow-lg p-8 sm:flex items-start justify-between"},[0==t.status?e("div",{staticClass:"w-full"},[t._m(0),t._v(" "),e("form",{staticClass:"mt-[50px]",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"col-span-2 sm:col-span-1"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Amount")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.wamount,expression:"wamount"},{name:"cleave",rawName:"v-cleave",value:{numeral:!0,numeralThousandsGroupStyle:"thousand",prefix:"₦ "},expression:"{\n              numeral: true,\n              numeralThousandsGroupStyle: 'thousand',\n              prefix: '₦ ',\n            }"}],staticClass:"w-full px-4 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",attrs:{type:"text",min:"15000",name:"amount"},domProps:{value:t.wamount},on:{input:function(e){e.target.composing||(t.wamount=e.target.value)}}}),t._v(" "),e("p",{staticClass:"text-[10px] mt-2 font-extrabold"},[t._v("\n            Account Balance: "+t._s(t._f("currency")(t.balance,"₦"))+"\n          ")])]),t._v(" "),e("div",{staticClass:"mt-[20px]"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Send To")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.sendto,expression:"sendto"}],staticClass:"w-full px-4 pr-12 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.sendto=e.target.multiple?n:n[0]}}},[t._l(t.beneficaries,(function(n,o){return e("option",{key:o,domProps:{value:n}},[t._v("\n              "+t._s(n.fullname)+"\n            ")])})),t._v(" "),e("option",{domProps:{value:null}},[t._v("Choose")]),t._v(" "),e("option",{attrs:{value:"new"}},[t._v("New Contact")])],2)]),t._v(" "),"new"==t.sendto?e("div",{staticClass:"mt-[20px]"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Account Number")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.accountnumber,expression:"form.accountnumber"}],staticClass:"w-full px-4 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",attrs:{type:"text",name:"account_number"},domProps:{value:t.form.accountnumber},on:{input:function(e){e.target.composing||t.$set(t.form,"accountnumber",e.target.value)}}})]):t._e(),t._v(" "),"new"==t.sendto?e("div",{staticClass:"mt-[20px]"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Bank")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.bankcode,expression:"form.bankcode"}],staticClass:"w-full px-4 pr-12 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"bankcode",e.target.multiple?n:n[0])}}},[e("option",{domProps:{value:null}},[t._v("Choose")]),t._v(" "),t._l(t.banks,(function(n,o){return e("option",{key:o,domProps:{value:n.code}},[t._v("\n              "+t._s(n.name)+"\n            ")])}))],2)]):t._e(),t._v(" "),e("div",{staticClass:"mt-[20px]"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Add a note")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.note,expression:"form.note"}],staticClass:"w-full px-4 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",domProps:{value:t.form.note},on:{input:function(e){e.target.composing||t.$set(t.form,"note",e.target.value)}}})]),t._v(" "),t._m(1)])]):t._e(),t._v(" "),1==t.status?e("div",{staticClass:"w-full"},[t._m(2),t._v(" "),e("form",{staticClass:"grid grid-cols-2 gap-8 mt-[50px]",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.confirmTransfer.apply(null,arguments)}}},[e("div",{staticClass:"col-span-2 sm:col-span-1"},[e("label",{staticClass:"font-thin text-sm"},[t._v("From")]),t._v(" "),e("p",[t._v(t._s(t.$auth.user.customer_id))])]),t._v(" "),e("div",{staticClass:"col-span-2 sm:col-span-1"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Transaction Fee")]),t._v(" "),e("p",[t._v(t._s(t._f("currency")("50","₦")))])]),t._v(" "),e("div",{staticClass:"col-span-2 sm:col-span-1"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Transfer To")]),t._v(" "),e("p",[t._v(t._s(t.intationResponse.recipient_name))])]),t._v(" "),e("div",{staticClass:"col-span-2 sm:col-span-1"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Amount")]),t._v(" "),e("p",[t._v(t._s(t._f("currency")(t.form.amount,"₦")))])]),t._v(" "),e("div",{staticClass:"col-span-2 sm:col-span-1"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Beneficary Bank")]),t._v(" "),e("p",[t._v(t._s(t.bankselected))])]),t._v(" "),e("div",{staticClass:"col-span-2 sm:col-span-1"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Description ")]),t._v(" "),e("p",[t._v(t._s(t.form.note))])]),t._v(" "),e("div",{staticClass:"col-span-2 sm:col-span-1"},[e("label",{staticClass:"font-thin text-sm"},[t._v("OTP")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.otp,expression:"otp"}],staticClass:"w-full px-4 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",attrs:{type:"text",minLength:"6",name:"amount"},domProps:{value:t.otp},on:{input:function(e){e.target.composing||(t.otp=e.target.value)}}})]),t._v(" "),t._m(3)])]):t._e()])])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex space-x-4 items-center mb-[5px]"},[e("img",{staticClass:"h-6",attrs:{src:"/icons/Wallet.svg"}}),t._v(" "),e("h3",{staticClass:"font-normal text-lg"},[t._v("Withdrawal")])])},function(){var t=this._self._c;return t("div",{staticClass:"mt-[20px]"},[t("button",{staticClass:"font-normal mt-8 rounded-3xl bg-custom-primary w-fit py-3 px-6 text-white tracking-wider hover:bg-opacity-90 text-sm",attrs:{type:"submit"}},[this._v("\n            Send Money\n          ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex space-x-4 items-center mb-[5px]"},[e("img",{staticClass:"h-6",attrs:{src:"/icons/Wallet.svg"}}),t._v(" "),e("h3",{staticClass:"font-normal text-lg"},[t._v("Withdrawal Confirmation")])])},function(){var t=this._self._c;return t("div",{staticClass:"mt-[20px] col-span-2 sm:col-span-2"},[t("button",{staticClass:"font-normal mt-8 rounded-3xl bg-custom-primary w-fit py-3 px-6 text-white tracking-wider hover:bg-opacity-90 text-sm mr-[20px]",attrs:{type:"submit"}},[this._v("\n            Send Money\n          ")])])}],!1,null,null,null);e.default=component.exports}}]);