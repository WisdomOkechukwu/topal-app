(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{518:function(t,e,n){"use strict";n.r(e);var o=n(3),r=(n(33),n(10),n(19),n(20),n(62),n(483),n(18),n(50),n(487),{name:"FundWalletModal",components:{SharedModal:function(){return Promise.resolve().then(n.bind(null,485))}},props:{isOpen:{type:Boolean,default:!1}},data:function(){return{amount:1e4}},mounted:function(){},methods:{fundReload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var param;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return param={reference_id:t,customer_id:e.$auth.user.customer_id},n.next=3,e.$apiservice.fundReload(param).then((function(t){"success"==t.data.status&&(console.log(t.data),e.$toast.alert({text:t.data.message,type:"success",time:3,position:"top"}),e.$auth.fetchUser(),$nuxt.$emit("closefunding"))})).catch((function(t){var n,o,r,l,c;(console.log(t),[419,401,400].includes(null==t||null===(n=t.response)||void 0===n?void 0:n.status))&&(r=null==t||null===(l=t.response.data)||void 0===l?void 0:l.message);[422].includes(null==t||null===(o=t.response)||void 0===o?void 0:o.status)&&(r=Object.values(null==t||null===(c=t.response.data)||void 0===c?void 0:c.errors)[0][0]);e.$toast.alert({text:r||"An error occured.",type:"error",time:3,position:"top"}),$nuxt.$emit("closefunding")}));case 3:case"end":return n.stop()}}),n)})))()},fundWallet:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var param;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return param={amount:t.amount.replaceAll(",",""),email:t.$auth.user.email},e.next=3,t.$apiservice.fundinInitation(param).then((function(e){t.$paystack({key:"pk_live_48b8b69f340734b03fea285fb9482b743f8de082",email:t.$auth.user.email,amount:100*t.amount.replaceAll(",",""),ref:e.data.reference,currency:"NGN",callback:function(n){t.fundReload(e.data.reference)},onClose:function(){t.amount=1e4}})})).catch((function(e){var n,o,r,l,c;(console.log(e),t.$notyf.error(e.response.data.message),[419,401,400].includes(null==e||null===(n=e.response)||void 0===n?void 0:n.status))&&(r=null==e||null===(l=e.response.data)||void 0===l?void 0:l.message);[422].includes(null==e||null===(o=e.response)||void 0===o?void 0:o.status)&&(r=Object.values(null==e||null===(c=e.response.data)||void 0===c?void 0:c.errors)[0][0]);t.$toast.alert({text:r||"An error occured while trying to login",type:"error",time:3,position:"top"})}));case 3:case"end":return e.stop()}}),e)})))()}}}),l=n(27),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("SharedModal",{attrs:{"is-open":t.isOpen}},[e("div",{staticClass:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"sm:flex sm:items-start w-full"},[e("div",{staticClass:"mt-3 sm:mt-0 sm:text-left w-full"},[e("h3",{staticClass:"text-lg leading-6 font-medium text-gray-900",attrs:{id:"modal-title"}},[t._v("\n          Fund your wallet\n        ")]),t._v(" "),e("div",{staticClass:"mt-2"},[e("p",{staticClass:"text-sm font-light text-gray-500"},[t._v("\n            Insert below the amount you choose to fund your wallet with:\n          ")])]),t._v(" "),e("div",{staticClass:"mt-4"},[e("div",{staticClass:"mt-1 relative rounded-md shadow-sm"},[e("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{staticClass:"text-gray-500 sm:text-xl"},[t._v(" NGN ")])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"},{name:"cleave",rawName:"v-cleave",value:{numeral:!0,numeralThousandsGroupStyle:"thousand"},expression:"{\n                numeral: true,\n                numeralThousandsGroupStyle: 'thousand',\n              }"}],staticClass:"focus:ring-custom-primary focus:border-custom-primary block w-full pl-16 pr-12 sm:text-xl font-semibold border-gray-300 rounded-md placeholder:sm:text-xl",attrs:{id:"amount",type:"text",name:"amount",placeholder:"0.00"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}})])])])])]),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-custom-primary text-base font-light text-white hover:bg-custom-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-custom-primary sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.fundWallet.apply(null,arguments)}}},[t._v("\n        Fund Wallet\n      ")]),t._v(" "),e("button",{staticClass:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-light text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-custom-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("\n        Cancel\n      ")])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SharedModal:n(485).default})}}]);