(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{520:function(e,t,o){"use strict";o.r(t);var n=o(3),r=(o(33),o(10),o(19),o(20),o(373),o(62),o(483),o(486)),l={name:"MobileDataModal",components:{SharedModal:function(){return Promise.resolve().then(o.bind(null,485))},Select:function(){return o.e(1).then(o.bind(null,545))}},props:{isOpen:{type:Boolean,default:!1},providers:{type:Array,default:function(){return[]}},bundles:{type:Array,default:function(){return[]}}},data:function(){return{amount:"50",phoneNumber:"",serviceType:null,bundle:null,formatToCurrency:r.a}},methods:{providerSelected:function(e){console.log(e),this.$emit("service-changed",e)},bundleSelected:function(e){this.bundle=this.bundles.find((function(p){return p.datacode===+e}))},sendMobileDataBundle:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n,r,l,d,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/mobile-data",{service_type:e.serviceType,phone:e.phoneNumber,datacode:null===(o=e.bundle)||void 0===o?void 0:o.datacode});case 3:e.$toast.alert({text:"Your mobile data recharge request is being processed.",type:"success",time:3,position:"top"}),e.$emit("close"),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),[419,401,400,403].includes(null===t.t0||void 0===t.t0||null===(n=t.t0.response)||void 0===n?void 0:n.status)&&(l=null===t.t0||void 0===t.t0||null===(d=t.t0.response.data)||void 0===d?void 0:d.message),[422].includes(null===t.t0||void 0===t.t0||null===(r=t.t0.response)||void 0===r?void 0:r.status)&&(l=Object.values(null===t.t0||void 0===t.t0||null===(c=t.t0.response.data)||void 0===c?void 0:c.errors)[0][0]),e.$toast.alert({text:l||"An error occured while trying to process your request",type:"error",time:3,position:"top"});case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},d=o(27),component=Object(d.a)(l,(function(){var e=this,t=e._self._c;return t("SharedModal",{attrs:{"is-open":e.isOpen}},[t("div",{staticClass:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"sm:flex sm:items-start w-full"},[t("div",{staticClass:"mt-3 sm:mt-0 sm:text-left w-full"},[t("h3",{staticClass:"text-lg leading-6 font-medium text-gray-900",attrs:{id:"modal-title"}},[e._v("\n          Mobile Data Recharge\n        ")]),e._v(" "),t("div",{staticClass:"mt-2"},[t("p",{staticClass:"text-sm font-light text-gray-500"},[e._v("\n            Insert below the amount you choose to recharge your phone with:\n          ")])]),e._v(" "),t("div",{staticClass:"mt-4"},[t("Select",{attrs:{"wrapper-overide-class":"mt-4","label-overide-class":"block text-sm font-medium text-custom-primary","input-overide-class":"mt-1\n                block\n                w-full\n                py-2\n                px-3\n                border border-gray-300\n                bg-white\n                rounded-md\n                shadow-sm\n                focus:outline-none focus:ring-custom-primary focus:border-custom-primary\n                sm:text-xl",label:"Choose network provider",entries:e.providers},on:{"value-changed":e.providerSelected}}),e._v(" "),t("Select",{attrs:{"wrapper-overide-class":"mt-4","label-overide-class":"block text-sm font-medium text-custom-primary","input-overide-class":"mt-1\n                block\n                w-full\n                py-2\n                px-3\n                border border-gray-300\n                bg-white\n                rounded-md\n                shadow-sm\n                focus:outline-none focus:ring-custom-primary focus:border-custom-primary\n                sm:text-xl",label:"Choose data bundle",entries:e.bundles},on:{"value-changed":e.bundleSelected}}),e._v(" "),e.bundle?t("span",{staticClass:"text-xs font-normal text-red-600"},[e._v(e._s("".concat(e.formatToCurrency(e.bundle.price))))]):e._e(),e._v(" "),e.bundle?t("div",{staticClass:"relative rounded-md shadow-sm mt-4"},[t("label",{class:["block text-sm font-medium text-custom-primary"],attrs:{for:"phoneNumber"}},[e._v("Phone Number")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"},{name:"cleave",rawName:"v-cleave",value:{phone:!0,phoneRegionCode:"NG",blocks:[4,3,4],uppercase:!0},expression:"{\n                phone: true,\n                phoneRegionCode: 'NG',\n                blocks: [4, 3, 4],\n                uppercase: true,\n              }"}],staticClass:"mt-1 focus:ring-custom-primary focus:border-custom-primary block w-full p-2 sm:text-2xl font-semibold border-gray-300 rounded-md placeholder:sm:text-2xl",attrs:{id:"phoneNumber",type:"text",name:"phoneNumber",placeholder:"XXXX-XXX-XXXX"},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}})]):e._e()],1)])])]),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[t("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-custom-primary text-base font-light text-white hover:bg-custom-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-custom-primary sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.sendMobileDataBundle.apply(null,arguments)}}},[e._v("\n        Continue\n      ")]),e._v(" "),t("button",{staticClass:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-light text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-custom-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}},[e._v("\n        Cancel\n      ")])])])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SharedModal:o(485).default})}}]);