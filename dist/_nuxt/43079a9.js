(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{486:function(t,e,n){"use strict";function r(a,b){return a.label<b.label?-1:a.label>b.label?1:0}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return l}));var o={style:"currency",currency:"NGN"},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return new Intl.NumberFormat(e,n).format(t)}},526:function(t,e,n){"use strict";n.r(e);n(63),n(28),n(10),n(38);var r=n(3),o=(n(62),n(483),n(33),n(495)),l=n.n(o),c=(n(486),{layout:"auth",middleware:"auth",asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.params,n=t.$axios,e.prev=1,e.next=4,n.get("baxi/cable/providers");case 4:return r=e.sent,e.abrupt("return",{providers:r.data.data.providers});case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),window.location.assign("");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},data:function(){return{smartcard_number:null,product_code:null,plan_amount:null,addon_amount:null,addon:null,network:null,providers:[],bundle:null,listproducts:[],listaddons:[]}},methods:{onChangeBundle:function(t){this.plan_amount=null,this.addon_amount=null},handleSubmit:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.product_code.availablePricingOptions[0].price),null!=t.product_code){e.next=4;break}return t.$toast.alert({text:"Product is required.",type:"error",time:3,position:"top"}),e.abrupt("return");case 4:if(null!=t.plan_amount){e.next=7;break}return t.$toast.alert({text:"Plan amount is required.",type:"error",time:3,position:"top"}),e.abrupt("return");case 7:if(null!=t.smartcard_number){e.next=10;break}return t.$toast.alert({text:"Smart Card Number is required.",type:"error",time:3,position:"top"}),e.abrupt("return");case 10:if(null!=t.network){e.next=13;break}return t.$toast.alert({text:"Network is required.",type:"error",time:3,position:"top"}),e.abrupt("return");case 13:return 0,null!=t.addon&&t.addon.availablePricingOptions[0].price,r={smartcard_number:t.smartcard_number,product_code:t.product_code.code,addon_code:null===(n=t.addon)||void 0===n?void 0:n.code,month:t.plan_amount.monthsPaidFor,tv:t.network.service_type,amount:t.addon_amount+t.plan_amount.price},console.log(r),e.next=19,t.$apiservice.sendTv(r).then((function(e){console.log(e.data.message),l()("Success",e.data.message,"success").then((function(e){console.log(e),1==e&&t.$router.push("./"),t.$router.push("./")}))})).catch((function(e){var n,r,o,l,c;(console.log(e),[419,401,400].includes(null==e||null===(n=e.response)||void 0===n?void 0:n.status))&&(o=null==e||null===(l=e.response.data)||void 0===l?void 0:l.message);[422].includes(null==e||null===(r=e.response)||void 0===r?void 0:r.status)&&(o=Object.values(null==e||null===(c=e.response.data)||void 0===c?void 0:c.errors)[0][0]);t.$toast.alert({text:o||"An error occured while trying.",type:"error",time:3,position:"top"})}));case 19:case"end":return e.stop()}}),e)})))()},onChangeNetwork:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.network.service_type),e.listproducts=[],e.listaddons=[],e.product_code=null,e.addon=null,t.next=7,e.listProducts();case 7:return t.next=9,e.listAddon();case 9:case"end":return t.stop()}}),t)})))()},listProducts:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={tv:t.network.service_type},t.listproducts=[],e.next=4,t.$apiservice.listProduct(n).then((function(e){t.listproducts=e.data.data,console.log(e.data.data[0])})).catch((function(e){var n,r,o,l,c;(console.log(e),[419,401,400].includes(null==e||null===(n=e.response)||void 0===n?void 0:n.status))&&(o=null==e||null===(l=e.response.data)||void 0===l?void 0:l.message);[422].includes(null==e||null===(r=e.response)||void 0===r?void 0:r.status)&&(o=Object.values(null==e||null===(c=e.response.data)||void 0===c?void 0:c.errors)[0][0]);t.$toast.alert({text:o||"An error occured while trying.",type:"error",time:3,position:"top"})}));case 4:case"end":return e.stop()}}),e)})))()},listAddon:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={tv:t.network.service_type},t.listaddons=[],e.next=4,t.$apiservice.listAddons(n).then((function(e){console.log(e.data),t.listaddons=e.data.data})).catch((function(e){var n,r,o,l,c;(console.log(e),[419,401,400].includes(null==e||null===(n=e.response)||void 0===n?void 0:n.status))&&(o=null==e||null===(l=e.response.data)||void 0===l?void 0:l.message);[422].includes(null==e||null===(r=e.response)||void 0===r?void 0:r.status)&&(o=Object.values(null==e||null===(c=e.response.data)||void 0===c?void 0:c.errors)[0][0]);t.$toast.alert({text:o||"An error occured while trying.",type:"error",time:3,position:"top"})}));case 4:case"end":return e.stop()}}),e)})))()}}}),d=n(27),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"grid grid-cols-12 gap-2 mt-8"},[e("div",{staticClass:"md:col-span-8 col-span-12 text-custom-primary bg-white rounded-xl sm:shadow-lg p-8 sm:flex items-start justify-between"},[e("div",{staticClass:"w-full"},[t._m(0),t._v(" "),e("form",{staticClass:"mt-[50px]",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"mt-[20px]"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Cable Network")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.network,expression:"network"}],staticClass:"w-full px-4 pr-12 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.network=e.target.multiple?n:n[0]},function(e){return t.onChangeNetwork(e)}]}},[e("option",{domProps:{value:null}},[t._v("Choose")]),t._v(" "),t._l(t.providers,(function(n,r){return e("option",{key:r,domProps:{value:n}},[t._v("\n              "+t._s(n.name)+"\n            ")])}))],2)]),t._v(" "),t.listproducts.length>0?e("div",{staticClass:"mt-[20px]"},[e("label",{staticClass:"font-thin text-sm"},[t._v("List Bundle")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.product_code,expression:"product_code"}],staticClass:"w-full px-4 pr-12 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.product_code=e.target.multiple?n:n[0]},function(e){return t.onChangeBundle(e)}]}},[e("option",{domProps:{value:null}},[t._v("Choose")]),t._v(" "),t._l(t.listproducts,(function(n,r){return e("option",{key:r,domProps:{value:n}},[t._v("\n              "+t._s(n.name)+"\n              "+t._s(t._f("currency")(n.availablePricingOptions[0].price,"₦"))+"\n            ")])}))],2)]):t._e(),t._v(" "),null!=t.product_code?e("div",{staticClass:"mt-[20px]"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Plan Months")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.plan_amount,expression:"plan_amount"}],staticClass:"w-full px-4 pr-12 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.plan_amount=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("Choose")]),t._v(" "),t._l(t.product_code.availablePricingOptions,(function(n,r){return e("option",{key:r,domProps:{value:n}},[t._v("\n              "+t._s(t.product_code.name)+" "+t._s(n.monthsPaidFor)+"\n              "+t._s(t._f("pluralize")(n.monthsPaidFor,"month"))+"\n              "+t._s(t._f("currency")(n.price,"₦"))+"\n            ")])}))],2)]):t._e(),t._v(" "),t.listaddons.length>0?e("div",{staticClass:"mt-[20px]"},[e("label",{staticClass:"font-thin text-sm"},[t._v("List Addons")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.addon,expression:"addon"}],staticClass:"w-full px-4 pr-12 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.addon=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("Choose")]),t._v(" "),t._l(t.listaddons,(function(n,r){return e("option",{key:r,domProps:{value:n}},[t._v("\n              "+t._s(n.name)+"\n              "+t._s(t._f("currency")(n.availablePricingOptions[0].price,"₦"))+"\n            ")])}))],2)]):t._e(),t._v(" "),null!=t.addon?e("div",{staticClass:"mt-[20px]"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Addon Months")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.addon_amount,expression:"addon_amount"}],staticClass:"w-full px-4 pr-12 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.addon_amount=e.target.multiple?n:n[0]}}},[e("option",{domProps:{value:null}},[t._v("Choose")]),t._v(" "),t._l(t.addon.availablePricingOptions,(function(n,r){return e("option",{key:r,domProps:{value:n.price}},[t._v("\n              "+t._s(t.addon.name)+" "+t._s(n.monthsPaidFor)+"\n              "+t._s(t._f("pluralize")(n.monthsPaidFor,"month"))+"\n              "+t._s(t._f("currency")(n.price,"₦"))+"\n            ")])}))],2)]):t._e(),t._v(" "),e("div",{staticClass:"mt-[20px]"},[e("label",{staticClass:"font-thin text-sm"},[t._v("Smart Card Number")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.smartcard_number,expression:"smartcard_number"}],staticClass:"w-full px-4 py-3 bg-[#f2f2f2] rounded-3xl text-2xl font-semibold border-none",attrs:{type:"text",name:"smartcard_number"},domProps:{value:t.smartcard_number},on:{input:function(e){e.target.composing||(t.smartcard_number=e.target.value)}}})]),t._v(" "),t._m(1)])])])])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex space-x-4 items-center mb-[5px]"},[e("img",{staticClass:"h-6",attrs:{src:"/icons/Wallet.svg"}}),t._v(" "),e("h3",{staticClass:"font-normal text-lg"},[t._v("Buy Cable TV")])])},function(){var t=this._self._c;return t("div",{staticClass:"mt-[20px]"},[t("button",{staticClass:"font-normal mt-8 rounded-3xl bg-custom-primary w-fit py-3 px-6 text-white tracking-wider hover:bg-opacity-90 text-sm",attrs:{type:"submit"}},[this._v("\n            Send Money\n          ")])])}],!1,null,null,null);e.default=component.exports}}]);